(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{6387:function(e,t,r){Promise.resolve().then(r.bind(r,842))},842:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var o=r(7437),a=r(9148),n=r(2265),s=r(4033);r(4243);var i=()=>{let{logout:e,user:t}=(0,a.aC)(),[r,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(5),[d,u]=(0,n.useState)(!1),f=(0,s.useRouter)();(0,n.useEffect)(()=>{u(!0)},[]),(0,n.useEffect)(()=>{let e;return r&&l>0?e=setTimeout(()=>{c(l-1)},1e3):r&&0===l&&f.push("/auth/login"),()=>{e&&clearTimeout(e)}},[r,l,f]);let h=async()=>{i(!0),await e()};return r?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50 py-12 px-4 sm:px-6 lg:px-8 transition-all duration-700 ".concat(d?"opacity-100 translate-y-0":"opacity-0 translate-y-10"),children:(0,o.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white/90 backdrop-blur-lg p-10 rounded-3xl shadow-2xl border border-white/50 text-center transform transition-all duration-500 hover:shadow-3xl animate-fade-in-up",children:[(0,o.jsx)("div",{className:"mx-auto h-20 w-20 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center shadow-lg animate-bounce",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("h2",{className:"mt-6 text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-green-600 to-emerald-600",children:"You've been logged out"}),(0,o.jsxs)("p",{className:"mt-3 text-lg text-gray-600",children:["You will be redirected to the login page in ",(0,o.jsx)("span",{className:"font-bold text-indigo-600",children:l})," seconds..."]}),(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,o.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-3 rounded-full transition-all duration-1000 ease-linear",style:{width:"".concat(l/5*100,"%")}})})})]})}):(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50 py-12 px-4 sm:px-6 lg:px-8 transition-all duration-700 ".concat(d?"opacity-100 translate-y-0":"opacity-0 translate-y-10"),children:(0,o.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white/90 backdrop-blur-lg p-10 rounded-3xl shadow-2xl border border-white/50 transform transition-all duration-500 hover:shadow-3xl animate-fade-in-up",children:[(0,o.jsxs)("div",{className:"text-center animate-fade-in-down",children:[(0,o.jsx)("div",{className:"mx-auto h-20 w-20 rounded-full bg-gradient-to-r from-red-500 to-rose-600 flex items-center justify-center shadow-lg",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,o.jsx)("h2",{className:"mt-6 text-4xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-red-600 to-rose-600",children:"Sign out"}),(0,o.jsx)("p",{className:"mt-3 text-lg text-gray-600",children:"Are you sure you want to sign out of your account?"})]}),(0,o.jsx)("div",{className:"mt-8 animate-fade-in-up delay-100",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 p-5 rounded-xl border border-gray-200 shadow-sm",children:[(0,o.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"Signed in as"}),(0,o.jsx)("p",{className:"text-base text-indigo-700 font-medium truncate",children:(null==t?void 0:t.email)||"Unknown User"})]})}),(0,o.jsxs)("div",{className:"mt-8 space-y-4 animate-fade-in-up delay-200",children:[(0,o.jsx)("button",{onClick:h,className:"w-full flex justify-center py-3.5 px-4 border border-transparent text-base font-bold rounded-xl text-white shadow-lg bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 focus:outline-none focus:ring-4 focus:ring-red-300 transform transition-all duration-300 hover:scale-[1.02]",children:"Sign out"}),(0,o.jsx)("button",{onClick:()=>{f.push("/tasks")},className:"w-full flex justify-center py-3.5 px-4 border border-gray-300 text-base font-bold rounded-xl text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-300 transform transition-all duration-300 hover:scale-[1.02]",children:"Cancel"})]})]})})};function l(){let{isAuthenticated:e}=(0,a.aC)(),t=(0,s.useRouter)();return((0,n.useEffect)(()=>{e||t.push("/auth/login")},[e,t]),e)?(0,o.jsx)(i,{}):null}},9148:function(e,t,r){"use strict";r.d(t,{Ho:function(){return s},aC:function(){return i}});var o=r(7437),a=r(2265);r(4033);let n=(0,a.createContext)(),s=e=>{let{children:t}=e,[r,s]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(e){let t=await fetch("".concat("http://localhost:8001","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let e=await t.json();s(e),l(!0)}else localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(e){console.error("Error checking auth status:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}finally{d(!1)}})()},[]);let u=async(e,t)=>{try{let o=await fetch("".concat("http://localhost:8001","/api/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(o.ok){let{access_token:e}=await o.json(),t=await fetch("".concat("http://localhost:8001","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let r=await t.json();return localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r)),s(r),l(!0),{success:!0,user:r}}throw Error("Failed to fetch user profile")}{let e=await o.json(),t="Login failed";if(e.detail){if(Array.isArray(e.detail)){var r;t=(null===(r=e.detail[0])||void 0===r?void 0:r.msg)||e.detail[0]||"Validation error occurred"}else t="object"==typeof e.detail&&e.detail.msg?e.detail.msg:e.detail}return{success:!1,error:t}}}catch(e){return console.error("Login error:",e),{success:!1,error:"Network error"}}},f=async(e,t,r)=>{try{let a=await fetch("".concat("http://localhost:8001","/api/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:r})});if(a.ok){let e=await a.json();return{success:!0,user:e}}{let e=await a.json(),t="Signup failed";if(e.detail){if(Array.isArray(e.detail)){var o;t=(null===(o=e.detail[0])||void 0===o?void 0:o.msg)||e.detail[0]||"Validation error occurred"}else t="object"==typeof e.detail&&e.detail.msg?e.detail.msg:e.detail}return{success:!1,error:t}}}catch(e){return console.error("Signup error:",e),{success:!1,error:"Network error"}}},h=async()=>{try{localStorage.getItem("token")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),l(!1)}};return(0,o.jsx)(n.Provider,{value:{user:r,isAuthenticated:i,loading:c,login:u,signup:f,register:f,logout:h},children:t})},i=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},4243:function(){},622:function(e,t,r){"use strict";var o=r(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var o,n={},c=null,d=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,o)&&!l.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=6387)}),_N_E=e.O()}]);