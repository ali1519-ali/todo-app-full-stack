(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{355:function(e,r,t){Promise.resolve().then(t.t.bind(t,3385,23)),Promise.resolve().then(t.t.bind(t,4243,23)),Promise.resolve().then(t.bind(t,2904)),Promise.resolve().then(t.bind(t,644))},2904:function(e,r,t){"use strict";t.r(r);var o=t(7437),n=t(9148),s=t(1396),a=t.n(s),i=t(2265);r.default=()=>{var e;let{user:r,isAuthenticated:t,logout:s}=(0,n.aC)(),[l,c]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{c(!0)},[]),l)?(0,o.jsx)("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-indigo-50 via-white to-purple-50 shadow-lg shadow-indigo-100/50 backdrop-blur-lg border-b border-white/20",children:(0,o.jsx)("nav",{className:"bg-transparent",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"flex justify-between h-20 items-center",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)(a(),{href:"/",className:"flex-shrink-0 flex items-center transform transition-transform duration-300 hover:scale-105",children:[(0,o.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-2 rounded-lg shadow-md",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 002 2h2a2 2 0 002-2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,o.jsx)("span",{className:"ml-3 text-2xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600",children:"Todo App"})]}),(0,o.jsxs)("div",{className:"hidden md:ml-10 md:flex md:space-x-2",children:[(0,o.jsx)(a(),{href:"/",className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-indigo-600 hover:bg-white/50 transition-all duration-300",children:"Home"}),t&&(0,o.jsx)(a(),{href:"/tasks",className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-indigo-600 hover:bg-white/50 transition-all duration-300",children:"Tasks"})]})]}),(0,o.jsx)("div",{className:"flex items-center space-x-4",children:t?(0,o.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,o.jsx)("div",{className:"hidden md:block bg-white/80 px-4 py-2 rounded-full shadow-sm border border-indigo-100",children:(0,o.jsxs)("span",{className:"text-sm font-bold text-indigo-700",children:["Welcome, ",null==r?void 0:null===(e=r.email)||void 0===e?void 0:e.split("@")[0]]})}),(0,o.jsxs)(a(),{href:"/auth/logout",className:"inline-flex items-center px-5 py-2.5 border border-transparent text-sm font-bold rounded-xl text-white shadow-lg bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 focus:outline-none focus:ring-4 focus:ring-red-300 transform transition-all duration-300 hover:scale-[1.02]",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}):(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsxs)(a(),{href:"/auth/login",className:"inline-flex items-center px-5 py-2.5 border border-transparent text-sm font-bold rounded-xl text-white shadow-lg bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transform transition-all duration-300 hover:scale-[1.02]",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]}),(0,o.jsxs)(a(),{href:"/auth/signup",className:"inline-flex items-center px-5 py-2.5 border border-gray-300 text-sm font-bold rounded-xl text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-300 shadow-lg transform transition-all duration-300 hover:scale-[1.02]",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Sign Up"]})]})})]})})})}):null}},644:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return s}});var o=t(7437),n=t(9148);function s(e){let{children:r}=e;return(0,o.jsx)(n.Ho,{children:r})}},9148:function(e,r,t){"use strict";t.d(r,{Ho:function(){return a},aC:function(){return i}});var o=t(7437),n=t(2265);t(4033);let s=(0,n.createContext)(),a=e=>{let{children:r}=e,[t,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(e){let r=await fetch("".concat("http://localhost:8001","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(r.ok){let e=await r.json();a(e),l(!0)}else localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(e){console.error("Error checking auth status:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}finally{d(!1)}})()},[]);let u=async(e,r)=>{try{let o=await fetch("".concat("http://localhost:8001","/api/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(o.ok){let{access_token:e}=await o.json(),r=await fetch("".concat("http://localhost:8001","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(r.ok){let t=await r.json();return localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t)),a(t),l(!0),{success:!0,user:t}}throw Error("Failed to fetch user profile")}{let e=await o.json(),r="Login failed";if(e.detail){if(Array.isArray(e.detail)){var t;r=(null===(t=e.detail[0])||void 0===t?void 0:t.msg)||e.detail[0]||"Validation error occurred"}else r="object"==typeof e.detail&&e.detail.msg?e.detail.msg:e.detail}return{success:!1,error:r}}}catch(e){return console.error("Login error:",e),{success:!1,error:"Network error"}}},h=async(e,r,t)=>{try{let n=await fetch("".concat("http://localhost:8001","/api/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:r,password:t})});if(n.ok){let e=await n.json();return{success:!0,user:e}}{let e=await n.json(),r="Signup failed";if(e.detail){if(Array.isArray(e.detail)){var o;r=(null===(o=e.detail[0])||void 0===o?void 0:o.msg)||e.detail[0]||"Validation error occurred"}else r="object"==typeof e.detail&&e.detail.msg?e.detail.msg:e.detail}return{success:!1,error:r}}}catch(e){return console.error("Signup error:",e),{success:!1,error:"Network error"}}},m=async()=>{try{localStorage.getItem("token")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),l(!1)}};return(0,o.jsx)(s.Provider,{value:{user:t,isAuthenticated:i,loading:c,login:u,signup:h,register:h,logout:m},children:r})},i=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3385:function(){},4243:function(){},622:function(e,r,t){"use strict";var o=t(2265),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var o,s={},c=null,d=null;for(o in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)a.call(r,o)&&!l.hasOwnProperty(o)&&(s[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===s[o]&&(s[o]=r[o]);return{$$typeof:n,type:e,key:c,ref:d,props:s,_owner:i.current}}r.Fragment=s,r.jsx=c,r.jsxs=c},7437:function(e,r,t){"use strict";e.exports=t(622)},1396:function(e,r,t){e.exports=t(5250)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[250,971,938,744],function(){return e(e.s=355)}),_N_E=e.O()}]);